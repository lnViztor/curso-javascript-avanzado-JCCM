# 7.1 Callbacks (AsincronÃ­a con funciones)

## ğŸ§  Â¿QuÃ© es la asincronÃ­a?

En JavaScript algunas operaciones **no suceden en el momento**, como:

* Consultas al servidor (fetch)
* Leer archivos
* Temporizadores (setTimeout)
* Eventos del usuario
* Animaciones

Mientras espera una respuesta, JavaScript **no se bloquea**. Sigue ejecutando otras cosas y, cuando termina la operaciÃ³n, llama a **un callback**.

---

## ğŸ”§ Â¿QuÃ© es un callback asincrÃ³nico?

Es una funciÃ³n que se ejecuta **mÃ¡s tarde**, cuando algo termina.

```js
console.log("Inicio");

setTimeout(() => {
  console.log("Esto se ejecuta despuÃ©s");
}, 2000);

console.log("Final");
```

Salida:

```
Inicio
Final
Esto se ejecuta despuÃ©s
```

---

## âœ… setTimeout y setInterval

```js
setTimeout(() => {
  console.log("Esto se retrasa 1 segundo");
}, 1000);

let n = 0;
setInterval(() => {
  n++;
  console.log("Cada segundo:", n);
}, 1000);
```

---

## âš ï¸ Problema real: Callback Hell ğŸ˜µ

Cuando anidas muchos callbacks, tu cÃ³digo pierde claridad.

```js
getUser(1, user => {
  getPosts(user.id, posts => {
    getComments(posts[0].id, comments => {
      console.log(comments);
    });
  });
});
```

Esto se conoce como **callback hell** porque es difÃ­cil de leer y mantener. MÃ¡s adelante aprenderemos a evitarlo usando **promesas** y **async/await**.

---

# ğŸ›  Laboratorio

## ğŸ¯ Objetivos

* Entender callbacks asincrÃ³nicos
* Usar setTimeout y setInterval
* Controlar la ejecuciÃ³n en el tiempo

---

### Ejercicio 1 â€” Mensaje con retraso

```js
setTimeout(() => {
  console.log("Esto aparece despuÃ©s de 2 segundos");
}, 2000);
```

---

### Ejercicio 2 â€” Contador cada segundo

```js
let contador = 1;
const id = setInterval(() => {
  console.log("Segundo:", contador);
  contador++;
  if (contador > 5) clearInterval(id);
}, 1000);
```

---

### Ejercicio 3 â€” Callback como parÃ¡metro

```js
function ejecutarDespues(mensaje, callback) {
  console.log(mensaje);
  callback();
}

ejecutarDespues("Primero esto", () => {
  console.log("Luego esto");
});
```

---

### Ejercicio 4 â€” Simular carga de datos

```js
function obtenerDatos(callback) {
  console.log("Cargando datos...");
  setTimeout(() => {
    callback({ nombre: "Ada", edad: 36 });
  }, 1500);
}

obtenerDatos((datos) => {
  console.log("Datos recibidos:", datos);
});
```

---

### Ejercicio 5 â€” Mini callback hell

```js
setTimeout(() => {
  console.log("Paso 1");
  setTimeout(() => {
    console.log("Paso 2");
    setTimeout(() => {
      console.log("Paso 3");
    }, 500);
  }, 500);
}, 500);
```

---

## ğŸš€ Retos

1. Simula un "cargando...", luego muestra datos reales tras 2 segundos.
2. Haz una funciÃ³n `esperar(ms, callback)` que ejecute algo despuÃ©s de ms milisegundos.
3. Crea un temporizador con inicio/parada usando callbacks.