# 10.7 Pruebas unitarias en JavaScript

## ğŸ§© Â¿QuÃ© son las pruebas unitarias?

Las **pruebas unitarias** (unit tests) sirven para comprobar que **una parte pequeÃ±a del cÃ³digo funciona correctamente** (normalmente una funciÃ³n o mÃ³dulo).

Nos ayudan a:
âœ… Detectar errores antes
âœ… Evitar regresiones
âœ… Tener confianza al refactorizar cÃ³digo
âœ… Mantener cÃ³digo profesional

---

## ğŸ›  Herramientas populares para testing

| Herramienta  | Uso                                |
| ------------ | ---------------------------------- |
| Jest         | âœ… La mÃ¡s popular (Node & Frontend) |
| Mocha + Chai | ClÃ¡sica y flexible                 |
| Vitest       | RÃ¡pida para proyectos modernos     |
| Jasmine      | Alternativa simple                 |

En este curso usaremos **Jest** porque es muy accesible y fÃ¡cil.

---

## âœ… Instalar Jest (opcional â€“ entorno Node)

```bash
npm init -y
npm install --save-dev jest
```

Y en `package.json` aÃ±ade:

```json
"scripts": {
  "test": "jest"
}
```

---

## ğŸ§ª Primera prueba unitaria

Archivo: `suma.js`

```js
function suma(a, b) {
  return a + b;
}
module.exports = suma;
```

Archivo: `suma.test.js`

```js
const suma = require("./suma");

test("suma 2 + 3 = 5", () => {
  expect(suma(2, 3)).toBe(5);
});
```

Ejecutar pruebas:

```bash
npm test
```

---

## âœ… Tipos de matchers (comparadores)

```js
expect(10).toBe(10);                     // igualdad estricta
expect({a:1}).toEqual({a:1});           // comparar objetos
expect(10).toBeGreaterThan(5);          // comparaciones
expect("Hola").toMatch(/Ho/);           // regex
expect([1,2,3]).toContain(2);           // arrays
expect(() => error()).toThrow();        // errores
```

---

## ğŸ¯ Tests para funciones reales

Archivo: `esPar.js`

```js
function esPar(n) {
  return n % 2 === 0;
}
module.exports = esPar;
```

Test:

```js
const esPar = require("./esPar");

test("4 es par", () => {
  expect(esPar(4)).toBe(true);
});
```

---

# ğŸ›  Laboratorio

## ğŸ¯ Objetivos

* Crear y ejecutar pruebas unitarias con Jest
* Escribir tests simples para funciones
* Usar expect() para validar resultados

---

### Ejercicio 1 â€” Test bÃ¡sico

```js
test("1 + 1 = 2", () => {
  expect(1 + 1).toBe(2);
});
```

---

### Ejercicio 2 â€” Probar funciÃ³n suma

```js
const suma = (a, b) => a + b;
test("suma correctamente", () => {
  expect(suma(5, 7)).toBe(12);
});
```

---

### Ejercicio 3 â€” Probar lÃ³gica

```js
function esMayorDeEdad(edad) {
  return edad >= 18;
}
test("mayorÃ­a de edad", () => {
  expect(esMayorDeEdad(20)).toBe(true);
});
```

---

### Ejercicio 4 â€” Probar errores

```js
function dividir(a, b) {
  if (b === 0) throw new Error("No se divide entre cero");
  return a / b;
}

test("lanza error al dividir entre cero", () => {
  expect(() => dividir(5, 0)).toThrow();
});
```

---

### Ejercicio 5 â€” Probar arrays

```js
test("contiene elemento", () => {
  expect([1, 2, 3]).toContain(2);
});
```

---

## ğŸš€ Retos

1. Crea una funciÃ³n `invertirTexto("hola") â†’ "aloh"` y escribe sus tests.
2. Haz tests para una calculadora con suma, resta, multiplicaciÃ³n y divisiÃ³n.
3. Testea una funciÃ³n que valide emails correctamente.
